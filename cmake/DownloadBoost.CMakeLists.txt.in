cmake_minimum_required(VERSION 2.8.2)

project(boost-download NONE)

include(ExternalProject)
include(FindPackageHandleStandardArgs)

set(Boost_FIND_COMPONENTS @ROCRAND_BOOST_COMPONENTS@)

if(CMAKE_SIZEOF_VOID_P EQUAL 8)
    set(boost_am 64)
else()
    set(boost_am 32)
endif()
mark_as_advanced(boost_am)

set(boost_variant "release")
if("@CMAKE_BUILD_TYPE@" STREQUAL "Debug")
    set(boost_variant "debug")
endif()
mark_as_advanced(boost_variant)

foreach(component ${Boost_FIND_COMPONENTS})
    list(APPEND Boost_COMPONENTS_FOR_BUILD --with-${component})
endforeach()

ExternalProject_Add(boost
    URL                 https://sourceforge.net/projects/boost/files/boost/1.64.0/boost_1_64_0.tar.bz2/download
    URL_MD5             93eecce2abed9d2442c9676914709349
    UPDATE_DISCONNECTED TRUE
    CONFIGURE_COMMAND   ./bootstrap.sh --prefix=@BOOST_ROOT@
    BUILD_COMMAND       ./b2 --prefix=@BOOST_ROOT@ -d0 address-model=${boostlib_am} variant=${boost_variant} ${Boost_COMPONENTS_FOR_BUILD}
    INSTALL_COMMAND     ./b2 --prefix=@BOOST_ROOT@ -d0 address-model=${boostlib_am} variant=${boost_variant} ${Boost_COMPONENTS_FOR_BUILD} install
    INSTALL_DIR         @BOOST_ROOT_DIR@
    BUILD_IN_SOURCE     TRUE
    LOG_DOWNLOAD        TRUE
    LOG_CONFIGURE       TRUE
    LOG_BUILD           TRUE
    LOG_INSTALL         TRUE
)
